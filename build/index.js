(()=>{"use strict";var e,l={550:()=>{const e=window.wp.blocks,l=window.wp.i18n,t=window.React,a=window.wp.components;class o{constructor(e,l){this.prepMas(e,l)}prepMas(e,l){let t=Array.from(document.querySelectorAll(e)),a=0;t.map((e=>{let t=null!=l&&null!=l.elSelector?e.querySelector(l.elSelector):e.children[0];if(null!=t){let o=null!=l&&null==l.elWidth&&!0===l.percentWidth?t.offsetWidth/e.offsetWidth:null;this.layBrks(e,l,o),a++,window.addEventListener("resize",(()=>this.layBrks(e,l,o,event)))}})),1<a&&window.dispatchEvent(new Event("resize"))}layBrks(e,l,t,a){let o=null!=l&&null!=l.elSelector?Array.from(e.querySelectorAll(l.elSelector)):Array.from(e.children),r=e.offsetWidth,n=null!=l&&null!=l.elWidth?l.elWidth:null!=t||null!=t?r*t:o[0].offsetWidth,s=null!=l&&null!=l.elMargin?l.elMargin:0,c=(r-s)/(n+s),d=Math.floor(c),i=((c-d)*n+(c+1)*s)/(d+1),g=Array(),h=Array(),u=Array(),m=Array();for(let l=0;l<=d-1;l++)h.push(e.offsetTop+s),g.push([e.offsetTop+s,e.offsetLeft+l*n+(l+1)*i]);if(null!=l&&null!=l.heightSort){for(let e in o)u.push(o[e].offsetHeight);"DESC"==l.heightSort.toUpperCase()?u.sort(((e,l)=>l-e)):"ASC"==l.heightSort.toUpperCase()&&u.sort(((e,l)=>e-l));for(let e in u)for(let l in o)o[l].offsetHeight==u[e]&&m.push(o.splice(l,1)[0])}else m=o;m.map(((t,o)=>{let r=1;g.map(((e,l)=>{if(h[0]===e[0]&&1===r)if(t.style.width=`${n}px`,t.style.position="absolute",t.style.left=`${e[1]}px`,t.style.top=`${e[0]}px`,r++,"img"===t.nodeName.toLowerCase()){t.style.height="";let a=n/t.offsetWidth*t.offsetHeight;t.style.height=`${a}px`,h[0]=e[0]+a+i,g[l]=[e[0]+a+i,e[1]],h.sort(((e,l)=>e-l))}else h[0]=e[0]+t.offsetHeight+i,g[l]=[e[0]+t.offsetHeight+i,e[1]],h.sort(((e,l)=>e-l))})),o===m.length-1&&(h.sort(((e,l)=>l-e)),e.style.height=h[0]-e.offsetTop+s+"px",null==a&&(null!=l?"function"==typeof l.callback&&l.callback(e):window.dispatchEvent(new Event("resize"))))}))}}const r=window.wp.blockEditor,n=JSON.parse('{"u2":"masonry-gallery/ctc-gal-block"}');(0,e.registerBlockType)(n.u2,{keywords:[(0,l.__)("Masonry galllery","ctc-gal"),(0,l.__)("masonry gallery","ctc-gal"),(0,l.__)("Gallery","ctc-gal"),(0,l.__)("Collage","ctc-gal")],attributes:{brkWidth:{type:"Number",default:40},gallery:{type:"Array",default:[]},mediaIds:{type:"Array",default:[]},gutWidth:{type:"Number",default:15},clntId:{type:"String",default:""},addShadEff:{type:"Boolean",default:!1},shadowCol:{type:"String",default:""},boxShadWd:{type:"Number",default:0},zoomOnHoverClass:{type:"String",default:"ctc-gal-zoom-on-hover"},overlayClass:{type:"String",default:""},zoomOnHover:{type:"Boolean",default:!0},activateOverlay:{type:"Boolean",default:!1}},edit:function({clientId:e,attributes:n,setAttributes:s}){const c=(0,t.useRef)();return(0,t.useEffect)((()=>{s({clntId:e});let l=Array();n.gallery.length>=1&&(new o(`#mas-div-${n.clntId}`,{percentWidth:!0,elMargin:n.gutWidth}),setTimeout((()=>window.dispatchEvent(new Event("resize"))),300),l=n.gallery.map((e=>e.id)),s({mediaIds:l}))}),[n.gallery,n.brkWidth,n.gutWidth]),(0,t.createElement)("div",{...(0,r.useBlockProps)()},0<n.gallery.length&&(0,t.createElement)("div",{className:"ctc-gal-gallery",ref:c,id:`mas-div-${n.clntId}`},n.gallery.map(((e,l)=>(0,t.createElement)("img",{key:l,className:`mas-img-${n.clntId} ${n.zoomOnHoverClass}`,style:{width:`${n.brkWidth}%`,boxShadow:`${n.boxShadWd}px ${n.boxShadWd}px ${n.boxShadWd/2}px ${n.shadowCol}`},title:e.caption,src:e.url})))),(0,t.createElement)("div",{style:{border:"1px solid rgb(61, 148, 218)",backgroundColor:"rgba(255,255,255,1)"}},(0,t.createElement)(r.MediaUploadCheck,null,(0,t.createElement)(r.MediaUpload,{title:(0,l.__)("Select Images","ctc-gal"),multiple:!0,value:n.mediaIds,gallery:!0,onSelect:e=>s({gallery:e}),allowedTypes:["image"],render:({open:e})=>(0,t.createElement)("div",{style:{width:"100%",backgroundColor:"rgba(255,255,,255,1)",color:"rgb(61, 148, 218)",padding:"10px"}},(0,t.createElement)("h5",{className:"dashicons-before dashicons-format-gallery"},(0,l.__)("CTC Gallery","ctc-gal")),(0,t.createElement)(a.Button,{style:{marginLeft:"auto",marginRight:"auto",display:"block",color:"rgb(61, 148, 218)",border:"1px solid rgb(61, 148, 218)"},className:"ctc-gal-button dashicons-before dashicons-format-gallery",onClick:e},n.gallery.length>1?(0,l.__)(" Edit Gallery","ctc-gal"):(0,l.__)(" Select Images","ctc-gal")))}))),(0,t.createElement)("div",null,(0,t.createElement)(r.InspectorControls,null,(0,t.createElement)(a.PanelBody,null,(0,t.createElement)(a.RangeControl,{label:(0,l.__)("Image width in percentage","ctc-gal"),min:1,max:100,onChange:e=>s({brkWidth:e}),value:n.brkWidth,resetFallbackValue:30}),(0,t.createElement)(a.RangeControl,{label:(0,l.__)("Gutter Width","ctc-gal"),min:1,max:50,onChange:e=>s({gutWidth:e}),value:n.gutWidth,resetFallbackValue:0}),(0,t.createElement)(a.ToggleControl,{label:(0,l.__)("Enlarge Images on Hover","ctc-gal"),checked:n.zoomOnHover,onChange:e=>{e?(s({zoomOnHoverClass:"ctc-gal-zoom-on-hover"}),s({activateOverlay:!1}),s({overlayClass:""})):s({zoomOnHoverClass:""}),s({zoomOnHover:e})}}),(0,t.createElement)(a.ToggleControl,{label:(0,l.__)("Show Images on Overlay","ctc-gal"),checked:n.activateOverlay,onChange:e=>{e?(s({overlayClass:"ctc-gal-overlay"}),s({zoomOnHover:!1}),s({zoomOnHoverClass:""})):s({overlayClass:""}),s({activateOverlay:e})}})),(0,t.createElement)(a.PanelBody,null,(0,t.createElement)(a.ToggleControl,{label:(0,l.__)("Add Shadow Effect to images?","ctc-gal"),checked:n.addShadEff,onChange:e=>{e||(s({shadowCol:""}),s({boxShadWd:0})),s({addShadEff:e})}}),n.addShadEff&&(0,t.createElement)(t.Fragment,null," ",(0,t.createElement)(a.RangeControl,{label:(0,l.__)("Shadow Margin","ctc-gal"),min:0,max:50,value:n.boxShadWd,onChange:e=>s({boxShadWd:e}),resetFallback:!0,Value:0}),(0,t.createElement)("label",null,(0,l.__)("Shadow Color","ctc-gal").toUpperCase()),(0,t.createElement)(a.ColorPicker,{color:n.shadowCol,onChange:e=>s({shadowCol:e}),enableAlpha:!0,defaultValue:""}))))))},save:function({attributes:e}){return(0,t.createElement)("div",{...r.useBlockProps.save()},0<e.gallery.length&&(0,t.createElement)("div",{style:{opacity:"0"},"data-gut-wd":e.gutWidth,className:`mas-gal-gallery ${e.overlayClass}`,id:`mas-div-${e.clntId}`},e.gallery.map(((l,a)=>(0,t.createElement)("img",{key:a,className:`mas-img-${e.clntId} ${e.zoomOnHoverClass}`,style:{boxShadow:`${e.boxShadWd}px ${e.boxShadWd}px ${e.boxShadWd/2}px ${e.shadowCol}`,width:`${e.brkWidth}% `},title:l.caption,src:l.url})))))}})}},t={};function a(e){var o=t[e];if(void 0!==o)return o.exports;var r=t[e]={exports:{}};return l[e](r,r.exports,a),r.exports}a.m=l,e=[],a.O=(l,t,o,r)=>{if(!t){var n=1/0;for(i=0;i<e.length;i++){for(var[t,o,r]=e[i],s=!0,c=0;c<t.length;c++)(!1&r||n>=r)&&Object.keys(a.O).every((e=>a.O[e](t[c])))?t.splice(c--,1):(s=!1,r<n&&(n=r));if(s){e.splice(i--,1);var d=o();void 0!==d&&(l=d)}}return l}r=r||0;for(var i=e.length;i>0&&e[i-1][2]>r;i--)e[i]=e[i-1];e[i]=[t,o,r]},a.o=(e,l)=>Object.prototype.hasOwnProperty.call(e,l),(()=>{var e={826:0,431:0};a.O.j=l=>0===e[l];var l=(l,t)=>{var o,r,[n,s,c]=t,d=0;if(n.some((l=>0!==e[l]))){for(o in s)a.o(s,o)&&(a.m[o]=s[o]);if(c)var i=c(a)}for(l&&l(t);d<n.length;d++)r=n[d],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(i)},t=globalThis.webpackChunkctc_gal_block=globalThis.webpackChunkctc_gal_block||[];t.forEach(l.bind(null,0)),t.push=l.bind(null,t.push.bind(t))})();var o=a.O(void 0,[431],(()=>a(550)));o=a.O(o)})();