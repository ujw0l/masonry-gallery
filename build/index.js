(()=>{"use strict";var e,l={564:()=>{const e=window.wp.blocks,l=window.wp.i18n,t=window.wp.element,a=window.React,o=window.wp.components;class r{constructor(e,l){this.prepMas(e,l)}prepMas(e,l){let t=Array.from(document.querySelectorAll(e)),a=0;t.map((e=>{let t=null!=l&&null!=l.elSelector?e.querySelector(l.elSelector):e.children[0];if(null!=t){let o=null!=l&&null==l.elWidth&&!0===l.percentWidth?t.offsetWidth/e.offsetWidth:null;this.layBrks(e,l,o),a++,window.addEventListener("resize",(()=>this.layBrks(e,l,o,event)))}})),1<a&&window.dispatchEvent(new Event("resize"))}layBrks(e,l,t,a){let o=null!=l&&null!=l.elSelector?Array.from(e.querySelectorAll(l.elSelector)):Array.from(e.children),r=e.offsetWidth,n=null!=l&&null!=l.elWidth?l.elWidth:null!=t||null!=t?r*t:o[0].offsetWidth,s=null!=l&&null!=l.elMargin?l.elMargin:0,c=(r-s)/(n+s),d=Math.floor(c),i=((c-d)*n+(c+1)*s)/(d+1),g=Array(),h=Array(),u=Array(),m=Array();for(let l=0;l<=d-1;l++)h.push(e.offsetTop+s),g.push([e.offsetTop+s,e.offsetLeft+l*n+(l+1)*i]);if(null!=l&&null!=l.heightSort){for(let e in o)u.push(o[e].offsetHeight);"DESC"==l.heightSort.toUpperCase()?u.sort(((e,l)=>l-e)):"ASC"==l.heightSort.toUpperCase()&&u.sort(((e,l)=>e-l));for(let e in u)for(let l in o)o[l].offsetHeight==u[e]&&m.push(o.splice(l,1)[0])}else m=o;m.map(((t,o)=>{let r=1;g.map(((e,l)=>{if(h[0]===e[0]&&1===r)if(t.style.width=`${n}px`,t.style.position="absolute",t.style.left=`${e[1]}px`,t.style.top=`${e[0]}px`,r++,"img"===t.nodeName.toLowerCase()){t.style.height="";let a=n/t.offsetWidth*t.offsetHeight;t.style.height=`${a}px`,h[0]=e[0]+a+i,g[l]=[e[0]+a+i,e[1]],h.sort(((e,l)=>e-l))}else h[0]=e[0]+t.offsetHeight+i,g[l]=[e[0]+t.offsetHeight+i,e[1]],h.sort(((e,l)=>e-l))})),o===m.length-1&&(h.sort(((e,l)=>l-e)),e.style.height=h[0]-e.offsetTop+s+"px",null==a&&(null!=l?"function"==typeof l.callback&&l.callback(e):window.dispatchEvent(new Event("resize"))))}))}}const n=window.wp.blockEditor,s=JSON.parse('{"u2":"masonry-gallery/ctc-gal-block"}');(0,e.registerBlockType)(s.u2,{keywords:[(0,l.__)("Masonry galllery","ctc-gal"),(0,l.__)("masonry gallery","ctc-gal"),(0,l.__)("Gallery","ctc-gal"),(0,l.__)("Collage","ctc-gal")],attributes:{brkWidth:{type:"Number",default:48},gallery:{type:"Array",default:[]},mediaIds:{type:"Array",default:[]},gutWidth:{type:"Number",default:15},clntId:{type:"String",default:""},addShadEff:{type:"Boolean",default:!1},shadowCol:{type:"String",default:""},boxShadWd:{type:"Number",default:0},zoomOnHoverClass:{type:"String",default:"ctc-gal-zoom-on-hover"},overlayClass:{type:"String",default:""},zoomOnHover:{type:"Boolean",default:!0},activateOverlay:{type:"Boolean",default:!1}},edit:function(e){let{clientId:s,attributes:c,setAttributes:d}=e;const i=(0,a.useRef)();return(0,a.useEffect)((()=>{d({clntId:s});let e=Array();c.gallery.length>=1&&(new r(`#mas-div-${c.clntId}`,{percentWidth:!0,elMargin:c.gutWidth}),setTimeout((()=>window.dispatchEvent(new Event("resize"))),300),e=c.gallery.map((e=>e.id)),d({mediaIds:e}))}),[c.gallery,c.brkWidth,c.gutWidth]),(0,t.createElement)("div",(0,n.useBlockProps)(),0<c.gallery.length&&(0,t.createElement)("div",{className:"ctc-gal-gallery",ref:i,id:`mas-div-${c.clntId}`},c.gallery.map(((e,l)=>(0,t.createElement)("img",{key:l,className:`mas-img-${c.clntId} ${c.zoomOnHoverClass}`,style:{width:`${c.brkWidth}%`,boxShadow:`${c.boxShadWd}px ${c.boxShadWd}px ${c.boxShadWd/2}px ${c.shadowCol}`},title:e.caption,src:e.url})))),(0,t.createElement)("div",{style:{border:"1px solid rgb(61, 148, 218)",backgroundColor:"rgba(255,255,255,1)"}},(0,t.createElement)(n.MediaUploadCheck,null,(0,t.createElement)(n.MediaUpload,{title:(0,l.__)("Select Images","ctc-gal"),multiple:!0,value:c.mediaIds,gallery:!0,onSelect:e=>d({gallery:e}),allowedTypes:["image"],render:e=>{let{open:a}=e;return(0,t.createElement)("div",{style:{width:"100%",backgroundColor:"rgba(255,255,,255,1)",color:"rgb(61, 148, 218)",padding:"10px"}},(0,t.createElement)("h5",{className:"dashicons-before dashicons-format-gallery"},(0,l.__)("CTC Gallery","ctc-gal")),(0,t.createElement)(o.Button,{style:{marginLeft:"auto",marginRight:"auto",display:"block",color:"rgb(61, 148, 218)",border:"1px solid rgb(61, 148, 218)"},className:"ctc-gal-button dashicons-before dashicons-format-gallery",onClick:a},c.gallery.length>1?(0,l.__)(" Edit Gallery","ctc-gal"):(0,l.__)(" Select Images","ctc-gal")))}}))),(0,t.createElement)("div",null,(0,t.createElement)(n.InspectorControls,null,(0,t.createElement)(o.PanelBody,null,(0,t.createElement)(o.RangeControl,{label:(0,l.__)("Image width in percentage","ctc-gal"),min:1,max:100,onChange:e=>d({brkWidth:e}),value:c.brkWidth,resetFallbackValue:30}),(0,t.createElement)(o.RangeControl,{label:(0,l.__)("Gutter Width","ctc-gal"),min:1,max:50,onChange:e=>d({gutWidth:e}),value:c.gutWidth,resetFallbackValue:0}),(0,t.createElement)(o.ToggleControl,{label:(0,l.__)("Enlarge Images on Hover?","ctc-gal"),checked:c.zoomOnHover,onChange:e=>{e?(d({zoomOnHoverClass:"ctc-gal-zoom-on-hover"}),d({activateOverlay:!1}),d({overlayClass:""})):d({zoomOnHoverClass:""}),d({zoomOnHover:e})}}),(0,t.createElement)(o.ToggleControl,{label:(0,l.__)("Show Images on Overlay?","ctc-gal"),checked:c.activateOverlay,onChange:e=>{e?(d({overlayClass:"ctc-gal-overlay"}),d({zoomOnHover:!1}),d({zoomOnHoverClass:""})):d({overlayClass:""}),d({activateOverlay:e})}})),(0,t.createElement)(o.PanelBody,null,(0,t.createElement)(o.ToggleControl,{label:(0,l.__)("Add Shadow Effect to images?","ctc-gal"),checked:c.addShadEff,onChange:e=>{e||(d({shadowCol:""}),d({boxShadWd:0})),d({addShadEff:e})}}),c.addShadEff&&(0,t.createElement)(t.Fragment,null," ",(0,t.createElement)(o.RangeControl,{label:(0,l.__)("Shadow Margin","ctc-gal"),min:0,max:50,value:c.boxShadWd,onChange:e=>d({boxShadWd:e}),resetFallback:!0,Value:0}),(0,t.createElement)("label",null,(0,l.__)("Shadow Color","ctc-gal").toUpperCase()),(0,t.createElement)(o.ColorPicker,{color:c.shadowCol,onChange:e=>d({shadowCol:e}),enableAlpha:!0,defaultValue:""}))))))},save:function(e){let{attributes:l}=e;return(0,t.createElement)("div",n.useBlockProps.save(),0<l.gallery.length&&(0,t.createElement)("div",{style:{opacity:"0"},"data-gut-wd":l.gutWidth,className:`mas-gal-gallery ${l.overlayClass}`,id:`mas-div-${l.clntId}`},l.gallery.map(((e,a)=>(0,t.createElement)("img",{key:a,className:`mas-img-${l.clntId} ${l.zoomOnHoverClass}`,style:{boxShadow:`${l.boxShadWd}px ${l.boxShadWd}px ${l.boxShadWd/2}px ${l.shadowCol}`,width:`${l.brkWidth}% `},title:e.caption,src:e.url})))))}})}},t={};function a(e){var o=t[e];if(void 0!==o)return o.exports;var r=t[e]={exports:{}};return l[e](r,r.exports,a),r.exports}a.m=l,e=[],a.O=(l,t,o,r)=>{if(!t){var n=1/0;for(i=0;i<e.length;i++){for(var[t,o,r]=e[i],s=!0,c=0;c<t.length;c++)(!1&r||n>=r)&&Object.keys(a.O).every((e=>a.O[e](t[c])))?t.splice(c--,1):(s=!1,r<n&&(n=r));if(s){e.splice(i--,1);var d=o();void 0!==d&&(l=d)}}return l}r=r||0;for(var i=e.length;i>0&&e[i-1][2]>r;i--)e[i]=e[i-1];e[i]=[t,o,r]},a.o=(e,l)=>Object.prototype.hasOwnProperty.call(e,l),(()=>{var e={826:0,431:0};a.O.j=l=>0===e[l];var l=(l,t)=>{var o,r,[n,s,c]=t,d=0;if(n.some((l=>0!==e[l]))){for(o in s)a.o(s,o)&&(a.m[o]=s[o]);if(c)var i=c(a)}for(l&&l(t);d<n.length;d++)r=n[d],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(i)},t=globalThis.webpackChunkctc_gal_block=globalThis.webpackChunkctc_gal_block||[];t.forEach(l.bind(null,0)),t.push=l.bind(null,t.push.bind(t))})();var o=a.O(void 0,[431],(()=>a(564)));o=a.O(o)})();